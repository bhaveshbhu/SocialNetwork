var icon_ccbgdiv=null;var icon_ccdiv=null;var icon_doneit=null;var icon_isPopped=false;var icon_scrollTim=null;var icon_popup_w=300;var icon_popup_h=330;var icon_buddyIcon=null;var user_data=null;var icon_progress_w=136;var icon_progress_h=49;function icon_windowClose(){clearTimeout(icon_scrollTim);Y.U.Event.removeListener(window,"resize",icon_positionWindow);Y.U.Event.removeListener(window,"scroll",icon_positionWindowOnScroll);icon_ccdiv.style.display="none";icon_ccbgdiv.style.display="none";icon_isPopped=false;if(!F.is_safari&&!((F.is_ff2||F.is_ff3)&&F.is_mac)){F.eb_broadcast("stewart_play_if_was_playing")}}function icon_windowOpenFromHover(A){user_data=_ge("person_hover").hover_persons[A];if(!user_data){alert(F.output.get("personmenu_buddyicon")+" '"+A+"'");return }var B=1;return icon_windowOpen()}function icon_windowOpenFromLink(A){var B={};B.flickr_people_getInfo_onLoad=function(E,D,C){user_data=new BuddyData(D);icon_windowOpen()};F.API.callMethod("flickr.people.getInfo",{user_id:A},B)}function icon_windowOpen(){var C=user_data.nsid;var B=user_data.is_contact;var E=user_data.name;var A=user_data.is_friend;var G=user_data.is_family;var D=user_data.icon_url;if(B){if(A&&G){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_ff",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_ff_o",E)}}else{if(A){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_fri",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fri_o",E)}}else{if(G){_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_fam",E);if(user_data.gender=="M"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_m",E)}if(user_data.gender=="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_f",E)}if(user_data.gender!="M"&&user_data.gender!="F"){_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_fam_o",E)}}else{_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_con",E);_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_con_o",E)}}}_ge("contactChangerText3").innerHTML=F.output.get("personmenu_contactChangerText3",C,E)}else{_ge("contactChangerText1").innerHTML=F.output.get("personmenu_contactChangerText1_notcon",E);_ge("contactChangerText2").innerHTML=F.output.get("personmenu_contactChangerText2_notcom",E);_ge("contactChangerText3").innerHTML=F.output.get("personmenu_contactChangerText3_notcon")}_ge("contactChangerIcon").src=D;_ge("contactChangerCheckFriend").checked=A;_ge("contactChangerCheckFamily").checked=G;_ge("person_hover").hover_go_away();icon_ccdiv.style.display="block";icon_ccbgdiv.style.display="block";icon_isPopped=true;icon_positionWindow();Y.U.Event.addListener(window,"resize",icon_positionWindow);Y.U.Event.addListener(window,"scroll",icon_positionWindowOnScroll);if(!F.is_safari&&!((F.is_ff2||F.is_ff3)&&F.is_mac)){F.eb_broadcast("stewart_pause")}return false}function icon_positionWindowOnScroll(A){if(icon_doneit==false){return }icon_doneit=false;clearTimeout(icon_scrollTim);icon_scrollTim=setTimeout("icon_positionWindowOnScroll(true)",50);if(A){icon_doneit=true;icon_positionWindow()}}function icon_positionWindow(){if(!icon_isPopped){return }if(window.innerWidth){var C=window.innerWidth;var B=window.innerHeight;var A=window.pageXOffset;var D=window.pageYOffset}else{var C=document.body.clientWidth;var B=document.body.clientHeight;var A=document.body.scrollLeft;var D=document.body.scrollTop}icon_ccdiv.style.left=(A+((C-icon_popup_w)/2))+"px";icon_ccdiv.style.top=(D+((B-icon_popup_h)/2))+"px";icon_ccbgdiv.style.left=A;icon_ccbgdiv.style.top=D}function icon_windowCloseDone(){icon_ccdiv.style.display="none";var B=user_data.nsid;var A=_ge("contactChangerCheckFriend").checked;var E=_ge("contactChangerCheckFamily").checked;var C=A==user_data.is_friend;var D=E==user_data.is_family;if(C&&D&&user_data.is_contact){icon_windowClose();return }icon_showProgress(F.output.get("personmenu_working"));var G={};G.flickr_contacts_edit_onLoad=function(M,L,J,K){if(M){if(user_data){user_data.is_contact=true;user_data.is_friend=A;user_data.is_family=E}_ge("person_hover").hover_persons[K.user_id]=null;icon_updateContactTxt();icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",300)}else{var H;if(L&&L.documentElement){var I=L.documentElement.getElementsByTagName("err")[0];if(I){H=I.getAttribute("code")}}if(H=="3"){icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}else{if(H=="4"){icon_showDialog(F.output.get("too_many_contacts",user_data.name,global_contact_limit))}else{icon_showProgress(F.output.get("personmenu_failure"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}}}};G.flickr_contacts_add_onLoad=G.flickr_contacts_edit_onLoad;if(user_data.is_contact){F.API.callMethod("flickr.contacts.edit",{user_id:user_data.nsid,friend:A?1:0,family:E?1:0},G)}else{F.API.callMethod("flickr.contacts.add",{user_id:user_data.nsid,friend:A?1:0,family:E?1:0},G)}}function icon_updateContactTxt(){var D=_ge("span_user_contact_txt"+user_data.nsid);if(D){if(user_data.is_contact){var A='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_change")+"</a>?";if(user_data.is_friend&&user_data.is_family){if(user_data.gender=="M"){D.innerHTML=F.output.get("personmenu_updatecontact_ff_m",A)}if(user_data.gender=="F"){D.innerHTML=F.output.get("personmenu_updatecontact_ff_f",A)}if(user_data.gender!="M"&&user_data.gender!="F"){D.innerHTML=F.output.get("personmenu_updatecontact_ff_o",A)}}else{if(user_data.is_friend){if(user_data.gender=="M"){D.innerHTML=F.output.get("personmenu_updatecontact_fri_m",A)}if(user_data.gender=="F"){D.innerHTML=F.output.get("personmenu_updatecontact_fri_f",A)}if(user_data.gender!="M"&&user_data.gender!="F"){D.innerHTML=F.output.get("personmenu_updatecontact_fri_o",A)}}else{if(user_data.is_family){if(user_data.gender=="M"){D.innerHTML=F.output.get("personmenu_updatecontact_fam_m",A)}if(user_data.gender=="F"){D.innerHTML=F.output.get("personmenu_updatecontact_fam_f",A)}if(user_data.gender!="M"&&user_data.gender!="F"){D.innerHTML=F.output.get("personmenu_updatecontact_fam_o",A)}}else{if(user_data.gender=="M"){D.innerHTML=F.output.get("personmenu_updatecontact_con_m",A)}if(user_data.gender=="F"){D.innerHTML=F.output.get("personmenu_updatecontact_con_f",A)}if(user_data.gender!="M"&&user_data.gender!="F"){D.innerHTML=F.output.get("personmenu_updatecontact_con_o",A)}}}}}else{if(user_data.gender=="M"){D.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_m")+"</a>?"}if(user_data.gender=="F"){D.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_f")+"</a>?"}if(user_data.gender!="M"&&user_data.gender!="F"){D.innerHTML='<a href="/relationship.gne?id='+user_data.nsid+'" onclick="icon_windowOpenFromLink(\''+user_data.nsid+"'); return false\">"+F.output.get("personmenu_updatecontact_notcon_o")+"</a>?"}}}var C=_ge("uber_contact_status_"+user_data.nsid);if(C){if(user_data.is_contact){if(user_data.is_friend&&user_data.is_family){C.innerHTML=F.output.get("uber_contact_list_friend_and_family")+"&nbsp;"}else{if(user_data.is_friend){C.innerHTML=F.output.get("uber_contact_list_friend")+"&nbsp;"}else{if(user_data.is_family){C.innerHTML=F.output.get("uber_contact_list_family")+"&nbsp;"}else{C.innerHTML=F.output.get("uber_contact_list_contact")+"&nbsp;"}}}}else{C.innerHTML='<em style="color: #f15050">'+F.output.get("uber_contact_list_removed")+"</em>&nbsp;"}}if(global_users&&global_users[user_data.nsid]){var B=global_users[user_data.nsid];B.friend=(user_data.is_friend)?"1":"0";B.family=(user_data.is_family)?"1":"0";if(!user_data.is_contact){B.removed="1"}}}function icon_removeContact(A){icon_ccdiv.style.display="none";icon_showProgress(F.output.get("personmenu_working"));var B={};B.flickr_contacts_remove_onLoad=function(G,E,C,D){if(G){user_data.is_contact=false;_ge("person_hover").hover_persons[D.user_id]=null;icon_updateContactTxt();icon_showProgress(F.output.get("personmenu_success"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}else{icon_showProgress(F.output.get("personmenu_failure"));window.setTimeout("icon_hideProgress(); icon_windowClose();",500)}};F.API.callMethod("flickr.contacts.remove",{user_id:user_data.nsid},B)}function icon_showProgress(A){if(!global_comm_div){_make_comm_div("20002")}global_comm_div.start_comming(A)}function icon_showDialog(B){if(!global_comm_div){_make_comm_div("20002")}var A=function(){icon_hideProgress();icon_windowClose()};global_comm_div.start_comming(B,null,null,1,1,null,A)}function icon_hideProgress(){global_comm_div.stop_comming()}function iframeify(C){if(F.is_ie){var A="<iframe style='position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; z-index: -1; filter:Alpha(Opacity=\"0\");' >";var B=document.createElement(A);C.appendChild(B);return B}return null}function personmenu_process_img(A){_ge("person_hover").hover_add_img(A);A.onmouseover=_hitch(_ge("person_hover"),"icon_mouseover");A.onmouseout=_hitch(_ge("person_hover"),"icon_mouseout")}function personmenu_init(K,C){if(!C){setTimeout(function(){personmenu_init(K,1)},50);return }if(K){F.decorate(_ge("person_hover"),F._person_hover).hover_go_go_go()}var G=function(L){if(Y.U.Dom.hasClass(L,"xBuddyIcon")){return false}if(Y.U.Dom.hasClass(L,"xBuddyIconH")){return false}if(Y.U.Dom.hasClass(L,"xBuddyIconX")){return false}if(Y.U.Dom.hasClass(L,"person_hover_img")){return false}var N=L.src.split("#");var M=N[1];if(M){L.nsid=M;return true}return false};var H=[];var E=document.getElementsByTagName("IMG");var J=/.*#real=/;for(var D=0;D<E.length;D++){var B=E[D];var A=B.src;if(A.indexOf("#real=")!=-1){B.src=A.replace_regx(J,"")}if(K&&G(B)){H.push(B);setTimeout(function(){personmenu_process_img(H.pop())},1*D)}}if(!K){return }icon_ccbgdiv=_ge("contactChangerBackground");var I=35;icon_ccbgdiv.style.backgroundColor="#000";icon_ccbgdiv.style.opacity=I/100;icon_ccbgdiv.style.MozOpacity=I/100;icon_ccbgdiv.style.filter="alpha(opacity="+I+")";icon_ccdiv=_ge("contactChangerPopup");iframeify(icon_ccbgdiv)}F._person_hover=new Object();F._person_hover.hover_go_go_go=function(){this.hover_persons={};this.hover_showing=0;this.hover_menu_showing=0;this.hover_show_timer=null;this.hover_hide_timer=null;this.hover_anim_timer=null;this.hover_over=0;this.hover_curr_img=null;F.decorate(_ge("personmenu_button_bar"),F._personmenu_button_bar).bar_go_go_go();if(F.is_ie){_ge("person_hover_inner").style.width="79px";_ge("person_hover_inner").style.height="58px"}this.onmouseover=_hitch(this,"hover_mouseover");this.onmouseout=_hitch(this,"hover_mouseout")};F._person_hover.hover_add_img=function(A){var C="hover_img"+A.nsid;if(_ge(C)){return }var B=document.createElement("IMG");B.id=C;B.nsid=A.nsid;B.src=A.src;B.className="person_hover_img";_ge("person_hover_link").appendChild(B)};F._person_hover.hover_mouseover=function(A){clearTimeout(this.hover_hide_timer);this.hover_over=1};F._person_hover.hover_mouseout=function(A){this.hover_over=0;if(this.hover_menu_showing){return }this.hover_hide_timer=setTimeout(function(){var B=_ge("person_hover");if(!B.hover_over){B.hover_hide()}},500)};F._person_hover.icon_mouseover=function(B){if(this.hover_menu_showing){return }clearTimeout(this.hover_hide_timer);this.hover_icon=_get_event_src(B);if(this.hover_showing){this.hover_place_and_show()}if(this.hover_curr_img&&this.hover_curr_img.nsid!=this.hover_icon.nsid){this.hover_curr_img.style.display="none";this.hover_curr_img.style.visibility="hidden"}this.hover_curr_img=_ge("hover_img"+this.hover_icon.nsid);this.hover_curr_img.style.display="block";this.hover_curr_img.style.visibility="visible";_ge("person_hover_link").href=(this.hover_icon.parentNode.href)?this.hover_icon.parentNode.href:"/photos/"+this.hover_icon.nsid+"/";if(!this.hover_showing){var A=this.hover_icon;this.hover_show_timer=setTimeout(function(){var C=_ge("person_hover");if(A==C.hover_icon){C.hover_place_and_show()}},100)}};F._person_hover.hover_go_away=function(){this.hover_menu_showing=0;clearTimeout(this.hover_show_timer);clearTimeout(this.hover_hide_timer);clearTimeout(this.hover_anim_timer);this.hover_over=0;this.hover_hide_menu();this.hover_hide()};F._person_hover.icon_mouseout=function(A){if(this.hover_showing){return }clearTimeout(this.hover_show_timer)};F._person_hover.hover_hide=function(){this.hover_showing=0;this.style.display="none";Y.U.Event.removeListener(window,"resize",this.window_resize);Y.U.Event.removeListener(window,"scroll",this.window_scroll)};F._person_hover.window_mousedown=function(C,A){var B=_get_event_src(C);while(B){if(B.id=="person_hover"||B.id=="personmenu_down_button"){return }B=B.parentNode}A.hover_go_away()};F._person_hover.window_resize=function(B,A){A.hover_place()};F._person_hover.window_scroll=function(B,A){A.hover_place()};F._person_hover.hover_place_and_show=function(){this.hover_place();this.hover_show_hover()};F._person_hover.hover_show_hover=function(){this.hover_showing=1;this.style.display="block";Y.U.Event.addListener(window,"resize",this.window_resize,this);Y.U.Event.addListener(window,"scroll",this.window_scroll,this)};F._person_hover.hover_place=function(){var A=Y.U.Dom.getX(this.hover_icon);var B=Y.U.Dom.getY(this.hover_icon);A-=_pi((48-this.hover_icon.width)/2);B-=_pi((48-this.hover_icon.height)/2);this.style.left=(A-6)+"px";this.style.top=(B-5)+"px"};F._person_hover.hover_toggle_menu=function(){if(this.hover_menu_showing){this.hover_hide_menu()}else{this.hover_show_menu()}};F._person_hover.hover_add_contact=function(){icon_windowOpenFromHover(this.hover_icon.nsid)};F._person_hover.hover_hide_menu=function(){this.hover_menu_showing=0;_ge("person_hover_shadow").className="shadowLight";_ge("personmenu_down_button").button_hide_menu();_ge("personmenu_down_button").button_set_img_srcs_and_change("personmenu_down");Y.U.Event.removeListener(window,"mousedown",this.window_mousedown)};F._person_hover.hover_actually_show_menu=function(){clearTimeout(this.hover_anim_timer);_ge("personmenu_down_button").button_show_menu();_ge("person_hover_pulser_img").style.display="none";_ge("person_hover_link").style.display="block";F.scroll_this_el_into_view("personmenu_down_menu")};F._person_hover.hover_show_menu=function(G){this.hover_menu_showing=1;_ge("person_hover_shadow").className="shadowDark";var A=_ge("personmenu_down_button");A.button_hide_menu();A.button_set_img_srcs_and_change("personmenu_up");if(this.hover_icon.nsid==global_nsid){Y.U.Event.addListener(document.body,"mousedown",this.window_mousedown,this);_ge("person_menu_other_div").style.display="none";_ge("person_menu_you_div").style.display="block";_ge("personmenu_relationship_p").innerHTML=F.output.get("personmenu_hiyou");_ge("personmenu_relationship_p").style.display="block";this.hover_actually_show_menu()}else{_ge("person_menu_you_div").style.display="none";_ge("person_menu_other_div").style.display="block";var B=this.hover_persons[this.hover_icon.nsid];if(B){Y.U.Event.addListener(document.body,"mousedown",this.window_mousedown,this);var D=B.getRelationshipHTML();if(D){_ge("personmenu_relationship_p").innerHTML=D;_ge("personmenu_contact_link").style.display="none";_ge("personmenu_relationship_p").style.display="block"}else{D=F.output.get("personmenu_add_as_contact",B.name);_ge("personmenu_contact_link").innerHTML=D;_ge("personmenu_contact_link").href="/relationship.gne?id="+B.nsid;_ge("personmenu_relationship_p").style.display="none";_ge("personmenu_contact_link").style.display="block";if(typeof _is_beehive!="undefined"&&_is_beehive==true){var H=_ge("personmenu_contact_link");var E=H.parentNode.getElementsByTagName("div")[0];var I="menu_item_line_above";if(E&&YAHOO.util.Dom.hasClass(E,I)){YAHOO.util.Dom.removeClass(E,I)}H.style.display="none"}}if(B.has_collections){if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").style.display="block"}}else{if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").style.display="none"}}_ge("personmenu_photos_link").href=B.getphotos_url();_ge("personmenu_profile_link").href=B.getprofile_url();_ge("personmenu_sets_link").href=B.getphotos_url()+"sets/";if(_ge("personmenu_collections_link")){_ge("personmenu_collections_link").href=B.getphotos_url()+"collections/"}_ge("personmenu_tags_link").href=B.getTagsUrl();_ge("personmenu_archives_link").href=B.getArchivesUrl();if(_ge("personmenu_map_link")){_ge("personmenu_map_link").href=B.getMapUrl()}_ge("personmenu_faves_link").href=B.getFavoritesUrl();_ge("personmenu_contacts_link").href=B.getContactsUrl();_ge("personmenu_mail_link").href=B.getSendMailUrl();var C=(B.is_blocked)?F.output.get("personmenu_unblock"):F.output.get("personmenu_block");_ge("personmenu_block_link").innerHTML=C;_ge("personmenu_block_link").href="/ignore.gne?id="+B.nsid;this.hover_actually_show_menu()}else{if(!G){this.hover_anim_timer=setTimeout(function(){_ge("person_hover_link").style.display="none";_ge("person_hover_pulser_img").style.display="block"},1000);F.API.callMethod("flickr.people.getInfo",{user_id:this.hover_icon.nsid},this,null,null,null,0,0)}}}};F._person_hover.flickr_people_getInfo_onLoad=function(D,C,B){var A=C.documentElement.getElementsByTagName("person")[0].getAttribute("nsid");this.hover_persons[A]=new BuddyData(C);if(this.hover_menu_showing){this.hover_show_menu(1)}};function BuddyData(C){var A=C.documentElement;var D=A;var E=A.getElementsByTagName("person").item(0);this.nsid=E.getAttribute("nsid");this.is_contact=E.getAttribute("contact")==="1";this.is_friend=E.getAttribute("friend")==="1";this.is_family=E.getAttribute("family")==="1";this.is_rev_contact=E.getAttribute("revcontact")==="1";this.is_rev_friend=E.getAttribute("revfriend")==="1";this.is_rev_family=E.getAttribute("revfamily")==="1";this.is_blocked=E.getAttribute("ignored")==="1";this.has_collections=E.getAttribute("hascollections")&&E.getAttribute("hascollections")==="1";this.forum_blocked=E.getAttribute("forum_blocked")&&E.getAttribute("forum_blocked")==="1";this.gender=E.getAttribute("gender");this.name=this.nsid;try{this.name=A.getElementsByTagName("username").item(0).firstChild.nodeValue.escape_for_display()}catch(H){}this.photos_url="/photos/"+this.nsid+"/";this.profile_url="/people/"+this.nsid+"/";try{this.photos_url=A.getElementsByTagName("photosurl").item(0).firstChild.nodeValue}catch(H){}try{this.profile_url=A.getElementsByTagName("profileurl").item(0).firstChild.nodeValue}catch(H){}var I=E.getAttribute("iconserver");var G=Math.ceil(I/1000);if(I&&I!="0"){var B=_photo_root.replace("http://farm","http://farm"+G);this.icon_url=B+I+"/buddyicons/"+this.nsid+".jpg"}else{this.icon_url=_images_root+"/buddyicon.jpg"}}BuddyData.prototype={isMe:function(){if(global_nsid){return this.nsid==global_nsid}else{return false}},getYourRecentActivityUrl:function(){return"/recent_activity.gne"},getYourFlickrMailUrl:function(){return"/messages.gne?ok=1"},getYourAccountUrl:function(){return"/account/"},getYourBuddyIconEditUrl:function(){return"/iconbuilder/"},getphotos_url:function(){return this.photos_url},getprofile_url:function(){return this.profile_url},getTagsUrl:function(){return this.photos_url+"tags/"},getArchivesUrl:function(){return this.photos_url+"archives/"},getMapUrl:function(){return this.photos_url+"map/"},getFavoritesUrl:function(){return this.photos_url+"favorites/"},getContactsUrl:function(){return this.profile_url+"contacts/"},getSendMailUrl:function(){return"/messages_write.gne?to="+this.nsid},getRelationshipHTML:function(){var A='<a href="/relationship.gne?id='+this.nsid+'" onclick="return icon_windowOpenFromHover(\''+this.nsid+"');\">"+F.output.get("personmenu_change")+"</a>";switch(true){case this.is_blocked:return F.output.get("personmenu_are_blocking",this.name);case this.is_friend&&this.is_family:return F.output.get("personmenu_is_ff",this.name,A);case this.is_friend:return F.output.get("personmenu_is_fri",this.name,A);case this.is_family:return F.output.get("personmenu_is_fam",this.name,A);case this.is_contact:return F.output.get("personmenu_is_con",this.name,A);default:return null}},getReverseRelationshipHTML:function(){switch(true){case this.is_rev_friend&&this.isRefFamily:return F.output.get("personmenu_as_ff",this.name);case this.is_rev_friend:return F.output.get("personmenu_as_fri",this.name);case this.isRefFamily:return F.output.get("personmenu_as_fam",this.name);case this.is_rev_contact:return F.output.get("personmenu_as_con",this.name);default:return null}}};F._personmenu_button_bar={bar_go_go_go:function(){F.decorate(_ge("personmenu_down_button"),F._personmenu_button).button_go_go_go()}};F._personmenu_button={_decotype:F._simple_button,button_always_swap_img:0,button_img_root:"personmenu_down_",button_img_ext:"gif",button_go_go_go:function(){F.preload_images(_images_root+"/personmenu_down_default.gif",_images_root+"/personmenu_down_hover.gif",_images_root+"/personmenu_down_selected.gif");var D=this.button_get_menu();this.iframe=iframeify(D);var A=D.getElementsByTagName("A");for(var B=0;B<A.length;B++){var C=A[B];Y.U.Event.addListener(C,"click",function(){if(_ge("person_hover").hover_menu_showing){_ge("person_hover").hover_go_away()}})}F._personmenu_button._decotype.button_go_go_go.apply(this)},button_get_menu:function(){return _ge("personmenu_down_menu")},button_hide_menu:function(){this.button_get_menu().style.display="none"},button_show_menu:function(){var B=this.button_get_menu();B.style.visibility="hidden";B.style.display="block";var A=F.get_local_X(this);var C=F.get_local_Y(this);if(A+B.offsetWidth>_find_screen_width()){A=_find_screen_width()-B.offsetWidth}C+=(this.height);B.style.top=(C)+"px";B.style.left=(A)+"px";if(this.iframe){this.iframe.style.width=B.offsetWidth+"px";this.iframe.style.height=B.offsetHeight+"px"}B.style.visibility="visible"}};